import{u as H,c as x,a as g,f as r,b as i,F,d as G,n as R,g as $,h as O,t as B,i as v,o as q,w as S,j as J,k as A,l as K,T as P,m as Q,p as W,q as X,s as Y}from"./index-BnF8l7AT.js";import{s as z}from"./index-BRlZ3SBp.js";import{s as Z}from"./index-CilwWgSj.js";import{s as ee}from"./index-BDCyMIUx.js";import{s as te,a as ae}from"./index-D3Syt0LG.js";import{s as le}from"./index-DYxEU3Wq.js";import"./index-CQH9gJwO.js";import"./index-zgDmictm.js";import"./index-DtXwNtbH.js";import"./index-CNzma9Bh.js";import"./index-BFZwT1Qq.js";import"./index-B5XXzXyT.js";const se={class:"overflow-auto"},oe={class:"flex flex-row md:flex-col gap-1 md:gap-2 list-none m-0 p-0 overflow-auto"},ie=["onClick"],ne={key:0,class:"ml-auto text-sm font-semibold bg-primary-50 text-primary-900 px-2 py-1 hidden md:inline text-center",style:{"border-radius":"2rem",width:"23px",height:"23px"}},re={__name:"MailSidebar",props:{items:{type:Array,default:()=>[]}},setup(k){const p=H();function a(o){const m=o.routerLink||"/apps/mail/compose";p.push(m)}return(o,m)=>{const u=z;return g(),x("div",null,[r(u,{onClick:a,label:"Compose New",class:"mb-8 w-full",outlined:""}),i("div",se,[i("ul",oe,[(g(!0),x(F,null,G(k.items,s=>(g(),x("li",{key:s.id,class:R(["cursor-pointer select-none p-4 duration-150 rounded flex items-center justify-center md:justify-start md:flex-1 flex-auto",{"bg-primary":$(p).currentRoute.value.path===s.routerLink,"hover:surface-hover":$(p).currentRoute.value.path!==s.routerLink}]),onClick:b=>a(s)},[i("i",{class:R(["md:mr-4 text-surface-600 dark:text-surface-200 duration-150 text-lg",[s.icon,{"text-primary-50":$(p).currentRoute.value.path===s.routerLink}]])},null,2),i("span",{class:R(["text-surface-900 dark:text-surface-0 font-medium hidden md:inline",{"text-primary-50":$(p).currentRoute.value.path===s.routerLink}])},B(s.label),3),s.badge?(g(),x("span",ne,B(s.badge),1)):O("",!0)],10,ie))),128))])])])}}},ue={class:"p-0 m-0"},de={class:"bg-surface-0 dark:bg-surface-950 grid grid-cols-12 grid-nogutter flex-col md:flex-row gap-12 p-8 rounded"},ce={class:"col"},pe={class:"col"},me={key:0,class:"col-span-12"},fe={class:"border border-surface-200 dark:border-surface-700 rounded p-6"},ve={class:"col-span-12"},be={class:"flex gap-x-4 justify-end p-8 border-t border-surface-200 dark:border-surface-700"},ge={__name:"Reply",props:{dialogVisible:{type:Boolean,default:!1},mailDetail:{type:Object,default:null}},emits:["save","update:dialogVisible"],setup(k,{emit:p}){const a=v({}),o=v({}),m=p,u=k,s=v(!1),b=v(!1);q(()=>{c()}),S(()=>u.mailDetail,()=>{c()});function c(){a.value={...u.mailDetail}}function D(){const d=C();m("save",d)}function C(){return{...a.value,...o.value,id:j(),to:u.mailDetail.to||u.mailDetail.from,sent:!0,archived:!1,trash:!1,spam:!1,starred:!1,important:!1,date:L()}}function w(){s.value=!s.value}function j(){let d="",l="0123456789";for(let h=0;h<5;h++)d+=l.charAt(Math.floor(Math.random()*l.length));return d}function L(){return new Date().toDateString().split(" ").slice(1,4).join(" ")}return S(()=>u.dialogVisible,d=>{b.value=d}),S(()=>b.value,d=>{m("update:dialogVisible",d)}),(d,l)=>{const h=ae,_=le,M=te,V=ee,y=z,I=Z,e=P;return g(),J(I,{visible:b.value,"onUpdate:visible":l[5]||(l[5]=t=>b.value=t),header:"New Message",modal:"",class:"mx-4 sm:mx-0 sm:w-full md:w-8/12 lg:w-6/12",contentClass:"rounded-b border-t border-surface-200 dark:border-surface-700 p-0"},{default:A(()=>[i("div",ue,[i("div",de,[i("div",ce,[l[6]||(l[6]=i("label",{for:"to",class:"block text-surface-900 dark:text-surface-0 font-semibold mb-4"},"To",-1)),r(M,{class:"w-full",style:{height:"3.5rem"}},{default:A(()=>[r(h,{class:"pi pi-user",style:{left:"1.5rem"}}),r(_,{id:"to",type:"text",class:"w-full pl-16 text-surface-900 dark:text-surface-0 font-semibold",style:{height:"3.5rem"},modelValue:a.value.from,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.from=t)},null,8,["modelValue"])]),_:1})]),i("div",pe,[l[7]||(l[7]=i("label",{for:"Subject",class:"block text-surface-900 dark:text-surface-0 font-semibold mb-4"},"Subject",-1)),r(M,{class:"w-full",style:{height:"3.5rem"}},{default:A(()=>[r(h,{class:"pi pi-pencil",style:{left:"1.5rem"}}),r(_,{id:"subject",type:"text",placeholder:"Subject",class:"w-full pl-16 text-surface-900 dark:text-surface-0 font-semibold",style:{height:"3.5rem"},modelValue:a.value.title,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.title=t)},null,8,["modelValue"])]),_:1})]),s.value?(g(),x("div",me,[i("div",fe,B(a.value.message),1)])):O("",!0),i("div",ve,[K((g(),x("span",{class:"bg-surface-50 dark:bg-surface-950 cursor-pointer rounded px-2",onClick:l[2]||(l[2]=t=>w())},l[8]||(l[8]=[i("i",{class:"pi pi-ellipsis-h"},null,-1)]))),[[e,s.value?"Hide content":"Show content"]]),r(V,{editorStyle:{height:"250px"},class:"mt-4",modelValue:o.value.message,"onUpdate:modelValue":l[3]||(l[3]=t=>o.value.message=t)},null,8,["modelValue"])])]),i("div",be,[r(y,{type:"button",outlined:"",icon:"pi pi-image"}),r(y,{type:"button",outlined:"",icon:"pi pi-paperclip"}),r(y,{type:"button",class:"h-12",icon:"pi pi-send",label:"Send",onClick:l[4]||(l[4]=t=>D())})])])]),_:1},8,["visible"])}}},he={class:"card"},xe={class:"flex flex-col md:flex-row gap-6"},_e={class:"w-full md:w-3/12 xl:w-2/12 xl:p-4"},ye={class:"md:w-9/12 xl:w-10/12 xl:p-4"},Ae={__name:"Index",setup(k){const p=Q(),a=v([]),o=v({}),m=v("inbox"),u=v(!1),s=v(null),b=W();q(async()=>{m.value=b.path.split("/")[3],a.value=await D(),c(a.value)}),S(()=>b.path,e=>{m.value=e.split("/")[3]});async function c(e){C(e)}async function D(){const e=await fetch("/demo/data/mail.json"),{data:t}=await e.json();return t}function C(e){for(const t of e)!t.archived&&!t.trash&&!t.spam&&!t.sent&&w("inbox",t),Object.keys(t).forEach(n=>{t[n]===!0&&w(n,t)})}function w(e,t){o.value[e]?o.value[e].push(t):o.value[e]=[]}const j=X(()=>{var t,n,f,T,N,U,E;const e=o.value;return[{label:"Inbox",icon:"pi pi-inbox",badge:((t=e.inbox)==null?void 0:t.length)||0,routerLink:"/apps/mail/inbox"},{label:"Starred",icon:"pi pi-star",badge:((n=e.starred)==null?void 0:n.length)||0,routerLink:"/apps/mail/starred"},{label:"Spam",icon:"pi pi-ban",badge:((f=e.spam)==null?void 0:f.length)||0,routerLink:"/apps/mail/spam"},{label:"Important",icon:"pi pi-bookmark",badge:((T=e.important)==null?void 0:T.length)||0,routerLink:"/apps/mail/important"},{label:"Sent",icon:"pi pi-send",badge:((N=e.sent)==null?void 0:N.length)||0,routerLink:"/apps/mail/sent"},{label:"Archived",icon:"pi pi-book",badge:((U=e.archived)==null?void 0:U.length)||0,routerLink:"/apps/mail/archived"},{label:"Trash",icon:"pi pi-trash",badge:((E=e.trash)==null?void 0:E.length)||0,routerLink:"/apps/mail/trash"}]}),L=async e=>{o.value={};const t=e.length>0?"Mails deleted":"Mail deleted";_("trash",e),p.add({severity:"info",summary:"Info",detail:t,life:3e3}),c(a.value)},d=async e=>{o.value={},e.forEach(t=>{a.value.find(n=>n.id===t.id).spam=!0}),c(a.value)},l=async e=>{o.value={},_("archived",e),c(a.value)},h=async(e,t,n)=>{o.value={},a.value.find(f=>f.id===t.id)[e]=n,c(a.value)},_=(e,t)=>{t.length>0?t.forEach(n=>{a.value.find(f=>f.id===n.id)[e]=!0}):a.value.find(n=>n.id===t.id)[e]=!0},M=e=>{u.value=!0,s.value=e},V=e=>{u.value=!1,s.value=null,o.value={},a.value.push(e),c(a.value)},y=e=>{o.value={},a.value.push(e),c(a.value)},I=e=>{u.value=e};return(e,t)=>{const n=Y("router-view");return g(),x(F,null,[i("div",he,[i("div",xe,[i("div",_e,[r(re,{items:j.value},null,8,["items"])]),i("div",ye,[r(n,{allMails:a.value,mails:o.value[m.value]||void 0,onTrash:L,onSpam:d,onArchive:l,"onChange:mail:type":h,onReply:M,"onSend:message":V,"onNew:mail":y},null,8,["allMails","mails"])])])]),r(ge,{visible:u.value,"onUpdate:visible":t[0]||(t[0]=f=>u.value=f),"mail-detail":s.value,onSave:V,"onUpdate:dialogVisible":t[1]||(t[1]=f=>I())},null,8,["visible","mail-detail"])],64)}}};export{Ae as default};
