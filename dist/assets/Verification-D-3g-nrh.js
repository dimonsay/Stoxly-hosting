import{s as T}from"./index-rt5Ln_qp.js";import{s as j}from"./index-BRlZ3SBp.js";import{s as F}from"./index-w096dqtu.js";import{_ as R,a as U}from"./appname-gray-zZ5hlTXw.js";import{a as A}from"./axios-DZuKcKrn.js";import{aS as L,i as c,c as V,b as t,g as p,f as g,k as h,n as C,u as P,a as S,U as k,t as E,F as z,d as H,ba as w}from"./index-BnF8l7AT.js";import"./index-CQH9gJwO.js";import"./index-zgDmictm.js";import"./index-8vjeD20S.js";import"./index-DYxEU3Wq.js";const K={class:"login-image w-6/12 h-screen hidden md:block",style:{"max-width":"490px"}},W=["src"],q={class:"w-full",style:{background:"var(--surface-ground)"}},G={class:"flex flex-col"},J={class:"flex items-center mb-12 logo-container"},M=["src"],O=["src"],Q={class:"form-container text-left",style:{"max-width":"320px","min-width":"270px"}},X={class:"flex items-center mt-1 mb-6"},Y={class:"text-surface-900 dark:text-surface-0 font-bold ml-2"},Z={class:"button-container mt-6 text-left",style:{"max-width":"320px","min-width":"270px"}},ee={class:"buttons flex items-center gap-4"},de={__name:"Verification",setup(te){const{isDarkTheme:x}=L(),v=P(),l=c(Array(6).fill(null)),N=c([]),y=c(!1),_=sessionStorage.getItem("type"),m=sessionStorage.getItem("email");sessionStorage.removeItem("email"),sessionStorage.removeItem("type");const $=s=>{var o,n;s.preventDefault();const e=((n=(o=s.clipboardData)==null?void 0:o.getData("text"))==null?void 0:n.trim())||"";if(/^\d{6}$/.test(e)){const f=e.split("");f.forEach((i,a)=>{a<6&&(l.value[a]=parseInt(i,10))}),w(()=>{var i;console.log(),(i=N.value[5])!=null&&i.$el&&w(()=>u()),f.length==6&&w(()=>u())})}};async function u(){if(l.value.every(s=>s!==null)){const s=l.value.join(""),e=await A.verifyCode(s,m,_);e.success?(localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),_=="registration"?(sessionStorage.setItem("email",m),v.push({name:"login"})):_=="login"&&v.push({name:"me"})):e.isValidationError?(l.value=Array(6).fill(null),y.value=!0,console.error("Ошибка валидации:",e.errors)):e.isNetworkError?console.error("Сетевая ошибка"):console.error("Ошибка:",e.status,e.errors)}}function I(){return x.value?"light":"dark"}function D(){v.push("/")}const d=c(""),r=c(""),B=s=>{const o=/^\d+$/.test(s.key);r.value.id!="val6"?(d.value=s.currentTarget.nextElementSibling.children[0],o&&d.value.focus(),r.value=d.value,console.log(r.value)):o&&r.value.id=="val6"&&(console.log(1),r.value.blur(),d.value="",r.value="",u()),y.value=!1};return(s,e)=>{const o=F,n=j,f=T;return S(),V("div",{class:C("login-body flex min-h-screen  "+(p(x)?"layout-dark":"layout-light"))},[t("div",K,[t("img",{src:"/demo/images/pages/verification-"+(p(x)?"ondark":"onlight")+".png",alt:"atlantis",class:"h-screen w-full"},null,8,W)]),t("div",q,[g(f,{class:"min-h-screen text-center w-full flex items-center md:items-start justify-center flex-col bg-auto md:bg-contain bg-no-repeat",style:{padding:"20% 10% 20% 10%",background:"var(--exception-pages-image)"}},{default:h(()=>[t("div",G,[t("div",J,[t("img",{src:`/layout/images/logo/logo-${I()}.png`,class:"login-logo",style:{width:"45px"}},null,8,M),t("img",{src:`/layout/images/logo/appname-${I()}.png`,class:"login-appname ml-4",style:{width:"100px"}},null,8,O)]),t("div",Q,[e[2]||(e[2]=t("span",{class:"text-surface-900 dark:text-surface-0 font-bold mb-2 text-2xl m-0"},"Verification",-1)),e[3]||(e[3]=t("span",{class:"text-surface-600 dark:text-surface-200 font-medium"},[t("br"),k("We have sent code to you email: "),t("br"),t("br")],-1)),t("div",X,[e[1]||(e[1]=t("i",{class:"pi pi-envelope text-surface-600 dark:text-surface-200"},null,-1)),t("span",Y,E(p(m)[0])+E(p(m)[1])+"*****@gmail.com ",1)]),t("div",{class:"flex justify-between w-full items-center gap-4",onPaste:$},[(S(),V(z,null,H(6,(i,a)=>g(o,{key:a,inputId:"val"+(a+1),modelValue:l.value[a],"onUpdate:modelValue":b=>l.value[a]=b,inputClass:"w-12 text-center",class:C({error:y.value}),max:9,onKeyup:e[0]||(e[0]=b=>B(b))},null,8,["inputId","modelValue","onUpdate:modelValue","class"])),64))],32)]),t("div",Z,[t("div",ee,[g(n,{onClick:u,class:"block",style:{"max-width":"320px","margin-bottom":"32px"}},{default:h(()=>e[4]||(e[4]=[k("Verify")])),_:1}),g(n,{onClick:D,class:"block",severity:"danger",outlined:"",style:{"max-width":"320px","margin-bottom":"32px"}},{default:h(()=>e[5]||(e[5]=[k("Cancel")])),_:1})])])]),e[6]||(e[6]=t("div",{class:"login-footer flex items-center absolute",style:{bottom:"75px"}},[t("div",{class:"flex items-center login-footer-logo-container pr-6 mr-6 border-r border-surface-200 dark:border-surface-700"},[t("img",{src:R,class:"login-footer-logo",style:{width:"22px"}}),t("img",{src:U,class:"login-footer-appname ml-2",style:{width:"45px"}})]),t("span",{class:"text-sm text-surface-500 dark:text-surface-400 mr-4"},"Copyright 2024")],-1))]),_:1})])],2)}}};export{de as default};
